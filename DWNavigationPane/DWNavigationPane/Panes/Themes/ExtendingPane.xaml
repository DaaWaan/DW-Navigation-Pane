<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:DWNavigationPane.Converters"
    xmlns:local="clr-namespace:DWNavigationPane">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/DWNavigationPane;component/Panes/Themes/AnimatedPane.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <Style BasedOn="{StaticResource {x:Type local:AnimatedPane}}" TargetType="{x:Type local:ExtendingPane}">
        <Style.Resources>
            <converters:PercentToRangeConverter x:Key="PercentToRangeConverter" />
        </Style.Resources>

        <Setter Property="local:Element.IconContainerSize" Value="{Binding CompactWidth, RelativeSource={RelativeSource Self}, Mode=TwoWay}" />
        <Setter Property="CompactWidth" Value="49" />
        <Setter Property="ExtendedWidth" Value="200" />

        <Setter Property="Width">
            <Setter.Value>
                <MultiBinding Converter="{StaticResource PercentToRangeConverter}">
                    <Binding Path="TransformProgress" RelativeSource="{RelativeSource Self}" />
                    <Binding Path="CompactWidth" RelativeSource="{RelativeSource Self}" />
                    <Binding Path="ExtendedWidth" RelativeSource="{RelativeSource Self}" />
                </MultiBinding>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>